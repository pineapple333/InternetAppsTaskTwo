<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <title>Document</title>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous"> -->
    
</head>
<body>
    <div class="row">
        <div class="col-sm-8">
            <h1 class="mt-4">Dashboard</h1>
        </div>
        <div class="col-sm-4">
            <p class="lead mb-3">Welcome <%= typeof name != 'undefined' ? name : 'default' %> <%= req.session.userId !== 'undefined' ? req.session.userId : 'default' %></p>
            <a href="/users/logout" class="btn btn-secondary">Logout</a>
        </div>
    </div> 
    <div class="row">
        <div class="col-sm-8">
            <form method="GET" action="/users/dashboard">
                <div class="form-check">
                    <input class="form-check-input" name="is_awaiting" type="checkbox" onChange="this.form.submit()" <%= states.awaiting == 'on' ? "checked" : "" %>>
                    <label class="form-check-label" for="flexRadioDefault1">
                    Awaiting
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" name="is_returned" type="checkbox" id="Returned" onChange="this.form.submit()"  <%= states.returned == 'on' ? "checked" : "" %>>
                    <label class="form-check-label" for="flexRadioDefault2">
                    Returned
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="is_approved" id="Approved" onChange="this.form.submit()"  <%= states.approved == 'on' ? "checked" : "" %>>
                    <label class="form-check-label" for="flexRadioDefault2">
                    Approved
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="is_declined" id="Declined" onChange="this.form.submit()"  <%= states.declined == 'on' ? "checked" : "" %>>
                    <label class="form-check-label" for="flexRadioDefault2">
                    Declined
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="is_payed" id="Payed" onChange="this.form.submit()"  <%= states.payed == 'on' ? "checked" : "" %>>
                    <label class="form-check-label" for="flexRadioDefault2">
                    Payed
                    </label>
                </div>
            </form>
        </div>
    </div>
    <main>
        <div class="row">
            <div class="col-sm-10">
                <div class="jumbotron">
                    <h1>Your current reservations</h1>
                    <a href='/reservation' class='border-shadow'>
                        <span class='text-gradient'>New Reservation <i class='fas fa-user'></i></span>
                    </a>
                    <!-- form handling -->
                    <form action="/" method="POST", id='user_res'>
                        <div class="table-responsive">
                            <table class="table">
                                <thead class="thead-dark">
                                    <tr>
                                        <th>ID</th>
                                        <th>CarID</th>
                                        <th>DateFrom</th>
                                        <th>DateTo</th>
                                        <th>Cost</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <%- include('../include/_show_user') %>
                                </tbody>
                            </table>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-sm-2">
                <div class="well">
                    <div class="form-group">
                        <% if (locals.messages){ %>
                            <% for (var i = 0; i < messages.length; i++) { %>
                                <br> <%= messages[i].action %>
                            <% } %>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </main> 
