<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="/assets/css/styles.css"> -->
    <title>Document</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</head>
<body>
    <div class="row">
        <div class="col-sm-2">
            <p class="lead mb-3">Welcome <%= req.session.userId !== 'undefined' ? req.session.userId : 'default' %></p>
            <a href="<%= req.session.is_admin ? '/admin' : '/users/dashboard' %>" class="btn btn-secondary">Dashboard</a>
            <a href="/reservation" class="btn btn-secondary">All card</a>
        </div>
    </div> 
    <main>
        <div class="row">
            <div class="col-sm-12">
                    <h1>Awailable cars with this parameters</h1>
                    <!-- form handling -->
                    <%- include ("../partials/messages"); %>
                    <form action='/reservation', method="POST", id='user_res'>
                        <div class="form-group"></div>    
                            <label for="from">Date From</label>
                            <input
                                type="from"
                                id="date_from"
                                name="date_from"
                                class="form-control"
                                placeholder="<%= locals.date_from ? date_from : 'YYYY-MM-DD' %>"
                            />
                          </div>
                          <div class="form-group">
                            <label for="email">Date To</label>
                            <input
                                type="untill"
                                id="date_to"
                                name="date_to"
                                class="form-control"
                                placeholder="<%= locals.date_to ? date_to : 'YYYY-MM-DD' %>"
                            />
                          </div>
                          <div class = 'form-inline'>
                            <div class="form-group col-lg-12">
                                <div class="form-group">
                                    <label for="passengers">Passengers</label>
                                    <input
                                        type="untill"
                                        id="passengers"
                                        name="passengers"
                                        class="form-control"
                                        placeholder="passengers"
                                    />
                                  </div>
                                  <div class="form-group">
                                    <label for="capacity">Capacity</label>
                                    <input
                                        type="untill"
                                        id="capacity"
                                        name="capacity"
                                        class="form-control"
                                        placeholder="capacity"
                                    />
                                  </div>
                                <select id = 'car_type' name = "car_type" class="form-select" aria-label="Default select example">
                                    <option selected>Type</option>
                                    <option value="1" <%= locals.car_type == '1' ? "selected" : "" %>>Coupe</option>
                                    <option value="2" <%= locals.car_type == '2' ? "selected" : "" %>>Hatchback</option>
                                    <option value="3" <%= locals.car_type == '3' ? "selected" : "" %>>Convertable</option>
                                    <option value="4" <%= locals.car_type == '4' ? "selected" : "" %>>SUV</option>
                                    <option value="5" <%= locals.car_type == '5' ? "selected" : "" %>>Minivan</option>
                                    <option value="6" <%= locals.car_type == '6' ? "selected" : "" %>>Van</option>
                                    <option value="7" <%= locals.car_type == '7' ? "selected" : "" %>>Truck</option>
                                </select>
                                <select name = "fuel" class="form-select" aria-label="Default select example">
                                    <option selected>Fuel</option>
                                    <option value="1" <%= locals.fuel == '1' ? "selected" : "" %>>Petrol</option>
                                    <option value="2" <%= locals.fuel == '2' ? "selected" : "" %>>Diesel</option>
                                    <option value="3" <%= locals.fuel == '3' ? "selected" : "" %>>Electro</option>
                                </select>
                                <select name = "transmision" class="form-select" aria-label="Default select example">
                                    <option selected>Transmision</option>
                                    <option value="1" <%= locals.transmision == '1' ? "selected" : "" %>>Automatic</option>
                                    <option value="2" <%= locals.transmision == '2' ? "selected" : "" %>>Manual</option>   
                                </select>
                                <select name = "drive" class="form-select" aria-label="Default select example">
                                    <option selected>Drive</option>
                                    <option value="1" <%= locals.drive == '1' ? "selected" : "" %>>Front</option>
                                    <option value="2" <%= locals.drive == '2' ? "selected" : "" %>>Rear</option>
                                    <option value="3" <%= locals.drive == '3' ? "selected" : "" %>>Four</option>
                                </select>
                            </div>
                        </div>
                        
                          <div class="table-responsive">
                            <table class="table">
                                <thead class="thead-dark">
                                    <tr>
                                        <th>Select</th>
                                        <th>Picture</th>
                                        <th>Name</th>
                                        <th>Passengers</th>
                                        <th>Capacity</th>
                                        <th>Type</th>
                                        <th>Fuel</th>
                                        <th>Transmision</th>
                                        <th>Drive</th>
                                        <th>Cost</th>
                                        <th>Price</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <%- include('../include/_reservation') %>
                                </tbody>
                            </table>
                            <button id='refresh_button' type='submit' class="btn btn-primary btn-block">Refresh</button>
                        </form>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="row">

        </div>
    </main>
    
    <!-- <script>
        function val() {
            d = document.getElementById("select_id").value;
            b = document.getElementById("select_id").name;
            alert(b);
            const options = {
                method: 'get',
                url: '/reservation/reload',
                data: {
                    name: b,
                    value: d
                }
            };

            // send the request
            axios(options);
        }
    </script> -->
    </body>
</html>