<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    
</head>
<body>
    <div class="row">
        <div class="col-sm-10">
            <h1 class="mt-4">Dashboard</h1>
        </div>
        <div class="col-sm-2">
            <p class="lead mb-3">Welcome <%= typeof name != 'undefined' ? name : 'default' %></p>
            <a href="/users/logout" class="btn btn-secondary">Logout</a>
        </div>
    </div> 
    <div class="row">
        <div class="col-sm-8">
            <form method="GET" action="/admin">
                <div class="form-check">
                    <input class="form-check-input" name="is_awaiting" type="checkbox" onChange="this.form.submit()" <%= states.awaiting == 'on' ? "checked" : "" %>>
                    <label class="form-check-label" for="flexRadioDefault1">
                    Awaiting
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" name="is_returned" type="checkbox" id="Returned" onChange="this.form.submit()"  <%= states.returned == 'on' ? "checked" : "" %>>
                    <label class="form-check-label" for="flexRadioDefault2">
                    Returned
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="is_approved" id="Approved" onChange="this.form.submit()"  <%= states.approved == 'on' ? "checked" : "" %>>
                    <label class="form-check-label" for="flexRadioDefault2">
                    Approved
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="is_declined" id="Declined" onChange="this.form.submit()"  <%= states.declined == 'on' ? "checked" : "" %>>
                    <label class="form-check-label" for="flexRadioDefault2">
                    Declined
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" name="is_payed" id="Payed" onChange="this.form.submit()"  <%= states.payed == 'on' ? "checked" : "" %>>
                    <label class="form-check-label" for="flexRadioDefault2">
                    Payed
                    </label>
                </div>
            </form>
        </div>
    </div>
    <main>
        <div class="row">
            <div class="col-sm-12">
                <div class="jumbotron">
                    <h1>Your current reservations</h1>
                    <a href='/reservation' class='border-shadow'>
                        <span class='text-gradient'>New Reservation <i class='fas fa-user'></i></span>
                    </a>
                    <!-- form handling -->
                    <form action="/" method="POST", id='user_res'>
                        <div class="table-responsive">
                            <table class="table">
                                <thead class="thead-dark">
                                    <tr>
                                        <th>Choose</th>
                                        <th>RegistrationID</th>
                                        <th>CarID</th>
                                        <th>UserID</th>
                                        <th>DateFrom</th>
                                        <th>DateTo</th>
                                        <th>Cost</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <%- include('../include/_show') %>
                                </tbody>
                            </table>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="<%= !cd ? 'd-none' : '' %> card" style="width: 18rem;">
                    <img class="card-img-top" src="/img/vv.jpg" alt="Card image cap">
                    <div class="card-body">
                      <h5 class="card-title"><%= !cd[reg_id] ? 'd-none' : '' %></h5>
                      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                    </div>
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item">Cras justo odio</li>
                      <li class="list-group-item">Dapibus ac facilisis in</li>
                      <li class="list-group-item">Vestibulum at eros</li>
                    </ul>
                    <div class="card-body">
                      <a href="#" class="card-link">Card link</a>
                      <a href="#" class="card-link">Another link</a>
                    </div>
                  </div>
            </div>
            <div class="col-sm-6">
                <div class="<%= !ud ? 'd-none' : '' %> card" style="width: 18rem;">
                    <img class="card-img-top" src="/img/vv.jpg" alt="Card image cap">
                    <div class="card-body">
                      <h5 class="card-title">Card title</h5>
                      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                    </div>
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item">Cras justo odio</li>
                      <li class="list-group-item">Dapibus ac facilisis in</li>
                      <li class="list-group-item">Vestibulum at eros</li>
                    </ul>
                    <div class="card-body">
                      <a href="#" class="card-link">Card link</a>
                      <a href="#" class="card-link">Another link</a>
                    </div>
                  </div>
            </div>
        </div>
        <a href="/admin/new" class="btn btn-secondary">New Car</a>
    </main> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- <script>
        function val() {
            // d = document.getElementById("radio_reg_id").value;
            // b = document.getElementById("radio_reg_id").name;

            // document.getElementById("result").innerHTML = "";
            var ele = document.getElementsByTagName('input');

            var reg_id = 0
              
            for(i = 0; i < ele.length; i++) {
                  
                if(ele[i].type="radio") {
                  
                    if(ele[i].checked)
                        // document.getElementById("result").innerHTML
                        //         += ele[i].name + " Value: "
                        //         + ele[i].value + "<br>";
                        reg_id = ele[i].value
                }
            }

            // send the request
            let data = {
                element: reg_id
            };

            fetch(`/admin/card/${reg_id}`, {
            method: "POST", 
                body: JSON.stringify(data)
            }).then(res => {
                console.log("Request complete! response:", res.json());
            });
        }
    </script> -->